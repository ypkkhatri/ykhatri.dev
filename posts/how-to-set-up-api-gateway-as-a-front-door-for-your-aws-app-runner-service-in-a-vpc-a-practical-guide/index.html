<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide | Yougeshwar Khatri</title><meta name=keywords content="aws api gateway,aws app runner,api gateway integration,app runner backend,serverless backend setup,aws app runner api gateway,api gateway custom domain,aws serverless architecture,api gateway cors setup,secure backend integration,aws api gateway private vpc,api gateway vpc link,aws app runner private service,connect api gateway to app runner,api gateway private integration,aws app runner backend setup,secure api gateway connection,app runner vpc networking,aws private service integration,serverless private architecture"><meta name=description content="Connecting AWS App Runner with Amazon API Gateway inside a private network can be tricky ‚Äî especially when you want a secure, production-ready setup without exposing your backend to the public internet. In this guide, I‚Äôll walk through how to integrate API Gateway with your App Runner service over a private network using VPC links, handle routing, manage connectivity, and ensure security best practices. A practical guide for those who‚Äôve already mastered the basics and want to take their architecture to the next level."><meta name=author content="Yougeshwar Khatri"><link rel=canonical href=https://ykhatri.dev/posts/how-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide/><link crossorigin=anonymous href=/assets/css/stylesheet.bbf7e2c6ab228fa015650f10e29e95dcd94a7a178e8b0cd085bd282ad6ab3cf9.css integrity="sha256-u/fixqsij6AVZQ8Q4p6V3NlKeheOiwzQhb0oKtarPPk=" rel="preload stylesheet" as=style><link rel=icon href=https://ykhatri.dev/images/logo.png><link rel=icon type=image/png sizes=16x16 href=https://ykhatri.dev/images/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ykhatri.dev/images/favicon-32x32.png><link rel=apple-touch-icon href=https://ykhatri.dev/images/apple-touch-icon.png><link rel=mask-icon href=https://ykhatri.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://ykhatri.dev/posts/how-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://ykhatri.dev/posts/how-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide/"><meta property="og:site_name" content="Yougeshwar Khatri"><meta property="og:title" content="How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide"><meta property="og:description" content="Connecting AWS App Runner with Amazon API Gateway inside a private network can be tricky ‚Äî especially when you want a secure, production-ready setup without exposing your backend to the public internet. In this guide, I‚Äôll walk through how to integrate API Gateway with your App Runner service over a private network using VPC links, handle routing, manage connectivity, and ensure security best practices. A practical guide for those who‚Äôve already mastered the basics and want to take their architecture to the next level."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-05T00:00:00+00:00"><meta property="article:modified_time" content="2025-11-05T00:00:00+00:00"><meta property="article:tag" content="AWS"><meta property="article:tag" content="API Gateway"><meta property="article:tag" content="App Runner"><meta property="article:tag" content="VPC"><meta property="article:tag" content="Serverless"><meta property="article:tag" content="Cloud"><meta property="og:image" content="https://ykhatri.dev/images/p3/cover.webp"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://ykhatri.dev/images/p3/cover.webp"><meta name=twitter:title content="How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide"><meta name=twitter:description content="Connecting AWS App Runner with Amazon API Gateway inside a private network can be tricky ‚Äî especially when you want a secure, production-ready setup without exposing your backend to the public internet. In this guide, I‚Äôll walk through how to integrate API Gateway with your App Runner service over a private network using VPC links, handle routing, manage connectivity, and ensure security best practices. A practical guide for those who‚Äôve already mastered the basics and want to take their architecture to the next level."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ykhatri.dev/posts/"},{"@type":"ListItem","position":2,"name":"How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide","item":"https://ykhatri.dev/posts/how-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide","name":"How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide","description":"Connecting AWS App Runner with Amazon API Gateway inside a private network can be tricky ‚Äî especially when you want a secure, production-ready setup without exposing your backend to the public internet. In this guide, I‚Äôll walk through how to integrate API Gateway with your App Runner service over a private network using VPC links, handle routing, manage connectivity, and ensure security best practices. A practical guide for those who‚Äôve already mastered the basics and want to take their architecture to the next level.","keywords":["aws api gateway","aws app runner","api gateway integration","app runner backend","serverless backend setup","aws app runner api gateway","api gateway custom domain","aws serverless architecture","api gateway cors setup","secure backend integration","aws api gateway private vpc","api gateway vpc link","aws app runner private service","connect api gateway to app runner","api gateway private integration","aws app runner backend setup","secure api gateway connection","app runner vpc networking","aws private service integration","serverless private architecture"],"articleBody":"Introduction AWS App Runner makes it incredibly easy to deploy and scale web applications directly from your code repository or container image ‚Äî no infrastructure management required. It‚Äôs a great fit for developers who want simplicity without giving up the power of AWS.\nBut things start to get tricky when you want to securely connect App Runner to other AWS services inside a private VPC ‚Äî especially when you need to expose your backend through Amazon API Gateway.\nBy default, App Runner services are public-facing, and API Gateway communicates over the internet. While that works fine for basic setups, production environments often demand private connectivity, where all traffic stays within AWS‚Äôs internal network for security, compliance, or performance reasons.\nIn this guide, we‚Äôll go beyond the usual public setup and walk through how to:\nConnect Amazon API Gateway to your App Runner service through a private network path. Use VPC Link, Network Load Balancer (NLB), and App Runner VPC Endpoint to securely route traffic. Avoid common networking pitfalls around subnets, DNS, and permissions. Build a scalable, secure architecture suitable for production environments. By the end of this post, you‚Äôll have a working, private integration between API Gateway and App Runner ‚Äî a clean, secure pattern that combines the simplicity of App Runner with the control and power of AWS networking.\nUnderstanding the Architecture Before jumping into the implementation, it‚Äôs important to understand how each AWS service fits together in this design.\nFigure 1: Private integration between Amazon API Gateway and AWS App Runner using VPC Link, NLB, and App Runner VPC Endpoint.\nThe request flow works as follows:\nClient ‚Üí API Gateway The client sends an HTTP request to the API Gateway endpoint. This can be a public endpoint (secured with authentication) or a private API within your organization.\nAPI Gateway ‚Üí VPC Link API Gateway uses a VPC Link to establish a private connection to resources inside your VPC. This avoids exposing your backend to the internet.\nVPC Link ‚Üí Network Load Balancer (NLB) The VPC Link routes requests to a Network Load Balancer, which acts as the bridge between API Gateway and internal services. The NLB is required because VPC Link integrations must target a load balancer rather than an EC2 instance or endpoint directly.\nNLB ‚Üí App Runner VPC Endpoint The NLB forwards traffic to the App Runner VPC Endpoint ‚Äî a private endpoint that connects your VPC to your App Runner service securely.\nApp Runner VPC Endpoint ‚Üí App Runner Service Finally, the traffic reaches your App Runner service running inside AWS‚Äôs managed environment. Since all components are privately connected, there‚Äôs no public internet exposure at any stage.\nThis design ensures that your API Gateway communicates privately with App Runner, maintaining full control over inbound and outbound traffic. It‚Äôs a clean and secure pattern ideal for production workloads, regulated environments, or internal APIs.\nThe Challenge When working with AWS App Runner, one of its biggest strengths ‚Äî simplicity ‚Äî can also become a limitation once you step into more advanced architectures.\nBy default, every App Runner service exposes a public endpoint, and any client or service can reach it over the internet (unless restricted via IAM or custom authentication). That‚Äôs fine for simple apps or prototypes, but in most production setups, you need your backend to:\nCommunicate only within a private AWS network Be accessible only through controlled entry points (like API Gateway) Avoid public exposure for compliance or security reasons This is where the challenge begins.\nAPI Gateway cannot directly integrate with App Runner over private connectivity. Unlike services such as ECS or Lambda, there‚Äôs no built-in ‚Äúprivate integration‚Äù option. Even though App Runner now supports VPC Endpoints, these endpoints can‚Äôt be called directly by API Gateway ‚Äî they must be reached through a VPC Link, which in turn requires a Network Load Balancer (NLB) as a target.\nSo the main puzzle looks like this:\nHow can we connect API Gateway to a private App Runner service, without exposing anything publicly, while keeping the setup clean and maintainable?\nThe answer lies in chaining the components together:\nAPI Gateway ‚Üí VPC Link ‚Üí Network Load Balancer (NLB) ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service\nEach layer serves a specific purpose in keeping the communication private, scalable, and secure.\nIn the next section, we‚Äôll walk through how to implement this step by step using AWS CDK Python, highlighting key configurations along the way ‚Äî and link to a complete example repository for you to explore.\nThe Solution ‚Äî Connecting API Gateway and App Runner Privately Now that we understand the architecture and the networking challenge, let‚Äôs look at how to bring everything together. We‚Äôll use AWS CDK Python to provision all components, following the secure flow:\nAPI Gateway ‚Üí VPC Link ‚Üí Network Load Balancer (NLB) ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service Each layer plays a distinct role in ensuring private communication inside your AWS environment.\n1. Create the VPC, Security Group, and App Runner VPC Endpoint Start by creating a VPC with private subnets and a security group that allows traffic between the Network Load Balancer (NLB) and the App Runner VPC Endpoint. Next, set up the App Runner VPC Endpoint to enable private connectivity between your VPC and the App Runner service ‚Äî this ensures all communication stays internal, without exposing traffic to the public internet.\nvpc = ec2.Vpc( self, \"VPCId\", vpc_name=\"my-vpc\", subnet_configuration=[ ec2.SubnetConfiguration( name=\"my-private-subnet\", subnet_type=ec2.SubnetType.PRIVATE_WITH_EGRESS, cidr_mask=24, ) ], nat_gateways=0 # We don't need the NAT gateway ) security_group = ec2.SecurityGroup( self, \"SecurityGroupId\", security_group_name=\"security-group\", vpc=vpc, allow_all_outbound=True, ) security_group.add_ingress_rule( peer=security_group, connection=ec2.Port.all_traffic(), description=\"Allow all traffic within the security group\" ) vpc_apprunner_requests_endpoint = ec2.InterfaceVpcEndpoint( self, \"AppRunnerRequestsEndpointId\", vpc=vpc, service=ec2.InterfaceVpcEndpointAwsService.APP_RUNNER_REQUESTS, subnets=ec2.SubnetSelection(subnet_type=ec2.SubnetType.PRIVATE_WITH_EGRESS), security_groups=[security_group], private_dns_enabled=False, ) 2. Create the Network Load Balancer With the App Runner VPC Endpoint in place, the next step is to create a Network Load Balancer (NLB) inside your VPC which will be used connect to API Gateway via a VPC Link.\nSince App Runner VPC Endpoints use dynamically assigned ENIs, the NLB target group must resolve the private IP addresses of these interfaces. This ensures that traffic from API Gateway reaches the App Runner service securely and privately.\nKey points to keep in mind:\nThe NLB target group will point to the App Runner VPC Endpoint network interfaces IP addresses. Use TCP protocol for the target group, since App Runner listens for HTTP traffic internally. Ensure security groups and subnet configurations allow traffic from the NLB to the App Runner service. Here‚Äôs a concise AWS CDK snippet showing the setup:\neni_ipaddress_resolver = EniIpAddressResolver( self, \"EniIpAddressResolverId\", network_interface_ids=vpc_apprunner_requests_endpoint_eni_ids ) app_runner_vpc_endpoint_ips = eni_ipaddress_resolver.get_ip_addresses() nlb_apprunner = elbv2.NetworkLoadBalancer( self, \"NLBAppRunnerId\", load_balancer_name=\"nlb-app-runner\", vpc=vpc, vpc_subnets=ec2.SubnetSelection( subnet_type=ec2.SubnetType.PRIVATE_WITH_EGRESS ), security_groups=[security_group], internet_facing=False, cross_zone_enabled=True, enforce_security_group_inbound_rules_on_private_link_traffic=False, ) nlb_network_group = elbv2.NetworkTargetGroup( self, \"NLBAppRunnerTargetGroupId\", target_group_name=\"my-nlb-app-runner-tg\", vpc=vpc, port=443, protocol=elbv2.Protocol.TCP, target_type=elbv2.TargetType.IP, targets=[elbv2targets.IpTarget( ip) for ip in app_runner_vpc_endpoint_ips] ) nlb_listener = nlb_apprunner.add_listener( \"NLBAppRunnerListenerId\", default_target_groups=[nlb_network_group], port=443, protocol=elbv2.Protocol.TCP ) üí° Note: The app_runner_vpc_endpoint_ips should be dynamically resolved from the ENIs of your App Runner VPC Endpoint. The AWS CDK code for class EniIpAddressResolver in the example GitHub repo handles this automatically.\nThis setup allows API Gateway to route requests through the VPC Link ‚Üí NLB ‚Üí App Runner VPC Endpoint ‚Üí App Runner service, keeping all traffic within the private network.\n3. Configure App Runner Service in a VPC Once your VPC and NLB are ready, it‚Äôs time to configure the App Runner service to run inside your private network.\nKey steps:\nAttach the VPC Connector Ensure your App Runner service uses a VPC Connector pointing to the private subnets of your VPC. This allows the service to receive traffic through the NLB and communicate privately with other resources in the VPC. Associate Security Groups Use a security group that allows inbound traffic from the NLB and outbound traffic to any other required resources (databases, internal APIs, etc.). Private DNS and Networking App Runner services inside a VPC use private DNS names and ENIs, which are automatically resolved when registering with the NLB target group. Create the VPC Ingress Connection The VPC Ingress Connection is required for API Gateway or NLB to send traffic to a private App Runner service. It establishes the secure link between the App Runner service and your VPC. Here‚Äôs a concise CDK snippet illustrating the setup:\napprunner_vpc_connector = apprunner.CfnVpcConnector( self, \"AppRunnerVpcConnectorId\", vpc_connector_name=\"my-arvpcconn\", subnets=vpc_subnet_ids, security_groups=security_group_ids, ) apprunner_backend_api_service = apprunner.CfnService( self, \"AppRunnerBackendAPIServiceId\", source_configuration=apprunner.CfnService.SourceConfigurationProperty( authentication_configuration=apprunner.CfnService.AuthenticationConfigurationProperty( access_role_arn=app_runner_role.role_arn ), image_repository=apprunner.CfnService.ImageRepositoryProperty( image_identifier=\"my-app-image:latest\", image_repository_type=\"ECR\" ) ), network_configuration=apprunner.CfnService.NetworkConfigurationProperty( ingress_configuration=apprunner.CfnService.IngressConfigurationProperty( is_publicly_accessible=False ), egress_configuration=apprunner.CfnService.EgressConfigurationProperty( egress_type=\"VPC\", vpc_connector_arn=apprunner_vpc_connector.attr_vpc_connector_arn ), ), health_check_configuration=apprunner.CfnService.HealthCheckConfigurationProperty( path=\"/\", ), ) apprunner_vpc_ingress_connection = apprunner.CfnVpcIngressConnection( self, \"AppRunnerVpcIngressConnectionId\", vpc_ingress_connection_name=\"my-arvpcincon\", service_arn=apprunner_backend_api_service.attr_service_arn, ingress_vpc_configuration=apprunner.CfnVpcIngressConnection.IngressVpcConfigurationProperty( vpc_id=vpc.vpc_id, vpc_endpoint_id=vpc_apprunner_requests_endpoint.vpc_endpoint_id ) ) üí° Tip: Your App Runner service now has full private connectivity, enabling API Gateway to route requests securely via the NLB and VPC Link.\n4. Configure API Gateway Private Integration With the App Runner service fully private and connected to the VPC via the VPC Connector and VPC Ingress Connection, the final piece is to configure API Gateway so that it can securely route requests to your backend.\nCreate a VPC Link The VPC Link connects API Gateway to your Network Load Balancer (NLB) inside the private VPC. API Gateway uses this link to send traffic over the private network rather than the public internet. Configure API Gateway Routes Define the routes or methods for your API. Each route uses the existing VPC Link to forward requests to the NLB, which then reaches the App Runner service. Security and Access Optionally, add authorization (Cognito, IAM, or Lambda authorizers) to your API Gateway endpoints. Ensure security group rules allow traffic from the NLB to the App Runner service. Here‚Äôs a concise CDK snippet showing the integration:\nvpc_link = apigateway.VpcLink( self, \"ApiGatwayVpcLinkId\", description=\"VPC Link for App Runner NLB\", vpc_link_name=\"my-nlb-vpc-link\", targets=[nlb_apprunner] ) apigateway_restapi = apigateway.RestApi( self, \"ApiGatwayOpdRestApiId\", ... ) apprunner_integration = apigateway.Integration( type=apigateway.IntegrationType.HTTP_PROXY, integration_http_method=\"ANY\", options=apigateway.IntegrationOptions( connection_type=apigateway.ConnectionType.VPC_LINK, vpc_link=vpc_link, passthrough_behavior=apigateway.PassthroughBehavior.WHEN_NO_MATCH, request_parameters={ \"integration.request.path.proxy\": \"method.request.path.proxy\" }, ), uri=f\"https://{apprunner_vpc_ingress_connection.attr_domain_name}\" + \"/{proxy}\", ) restapi_apprunner_app_resource = apigateway_restapi.root.add_proxy( any_method=True, default_integration=apprunner_integration, default_method_options=apigateway.MethodOptions( api_key_required=True, # As its enabled you need to setup the key separately request_parameters={ \"method.request.path.proxy\": True }, ) ) ‚ö†Ô∏è Important These request_parameters are crucial for proxy integrations to work correctly:\n\"integration.request.path.proxy\": \"method.request.path.proxy\" ensures the path is correctly forwarded from API Gateway to the NLB. \"method.request.path.proxy\": True enables the API Gateway route to accept any path parameter dynamically. Missing these will cause the proxy route to fail or return 403/404 errors.\nThis ensures that your App Runner backend is fully private, with requests securely routed through API Gateway without exposing anything publicly. All traffic now flows privately through: Client ‚Üí API Gateway ‚Üí NLB ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service\nCommon Pitfalls \u0026 Troubleshooting Even with a clear architecture, integrating API Gateway with App Runner in a private VPC can be tricky. Here are the most common issues and tips to avoid them:\nENI IP Address Resolution App Runner VPC Endpoints use dynamically assigned network interfaces (ENIs). The Network Load Balancer must register these IPs as targets. ‚úÖ Tip: Use the CDK or your IaC tool to automatically fetch and register the ENI IPs; manually using static IPs can break if App Runner scales or changes. Security Groups and Subnet Configuration Ensure security groups allow: NLB ‚Üí App Runner VPC Endpoint traffic (inbound) App Runner ‚Üí other required services (outbound) Private subnets must have route tables allowing internal communication between NLB and App Runner. üîπ Common mistake: forgetting inbound rules for the NLB ‚Üí App Runner path. API Gateway Proxy Integration Parameters As highlighted earlier, these request_parameters are critical:\n\"integration.request.path.proxy\": \"method.request.path.proxy\" \"method.request.path.proxy\": True Missing or misconfigured parameters can cause 403, 404, or 502 errors. Always verify them in your code.\nDNS and Private Connectivity App Runner services in a VPC use private DNS. NLB target groups must resolve these private DNS names to ENI IP addresses. ‚ùó If DNS fails, traffic will not reach App Runner ‚Äî double-check private DNS and subnet connectivity. Testing and Logging Use Postman, curl, or API Gateway test console to validate requests. Enable CloudWatch logs on API Gateway and App Runner for troubleshooting. Enable AWS X-Ray tracing for both API Gateway and App Runner Service to get end-to-end visibility of requests, latency, and potential bottlenecks. Confirm that traffic flows: Client ‚Üí API Gateway ‚Üí NLB ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service üí° Pro Tip: Most issues in private integration setups come from networking or security group misconfigurations, so verify your VPC, subnets, and SG rules before troubleshooting code.\nConclusion \u0026 Next Steps In this guide, we explored how to set up Amazon API Gateway as a front door for an AWS App Runner service in a private VPC. By combining VPC Links, Network Load Balancer, and App Runner VPC Endpoints, we achieved a secure, fully private integration that keeps all traffic inside your AWS network.\nKey Takeaways App Runner services can now operate privately, avoiding public exposure. API Gateway VPC Links enable private connectivity to internal resources like NLB and App Runner endpoints. Proper configuration of security groups, subnets, and proxy integration parameters is critical for a working setup. AWS CDK (or other IaC tools) simplifies provisioning and dynamically resolves App Runner ENI IP addresses. AWS X-Ray (if enabled) and CloudWatch logs help trace requests end-to-end and troubleshoot networking issues. Next Steps Explore authorization options on API Gateway (Cognito, IAM, or Lambda authorizers) to control access to your private backend. üîπ Tip: You can refer to my previous blog on Lambda@Edge with Amazon Cognito for detailed guidance on integrating authentication and JWT validation: [üîó Step-by-Step Guide: Setting Up Lambda@Edge for Authentication \u0026 Authorization with Amazon Cognito] Automate deployment using CI/CD pipelines for reproducible setups. Experiment with scaling App Runner services while maintaining private integration. Check out the example repository for the full AWS CDK Python implementation: üîó GitHub Example Repo Link Comment on below if you‚Äôd like a Terraform version of this setup! This architecture provides a secure, scalable, and maintainable pattern for exposing App Runner services through API Gateway without public internet exposure ‚Äî ideal for internal APIs, regulated environments, or production workloads.\nReferences The following resources provided valuable insights and context for this guide, covering AWS App Runner, API Gateway private integrations, VPC connectivity:\nhttps://www.youtube.com/watch?v=H5OKe8jXnX0 https://repost.aws/knowledge-center/api-gateway-500-error-vpc https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-security-groups.html https://aws.amazon.com/blogs/compute/understanding-vpc-links-in-amazon-api-gateway-private-integrations/ ","wordCount":"2348","inLanguage":"en","image":"https://ykhatri.dev/images/p3/cover.webp","datePublished":"2025-11-05T00:00:00Z","dateModified":"2025-11-05T00:00:00Z","author":{"@type":"Person","name":"Yougeshwar Khatri"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://ykhatri.dev/posts/how-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide/"},"publisher":{"@type":"Person","name":"Yougeshwar Khatri","logo":{"@type":"ImageObject","url":"https://ykhatri.dev/images/logo.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ykhatri.dev/ accesskey=h title="Yougeshwar Khatri (Alt + H)">Yougeshwar Khatri</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ykhatri.dev/about/ title=About><span>About</span></a></li><li><a href=https://ykhatri.dev/certs/ title=Certs><span>Certs</span></a></li><li><a href=https://ykhatri.dev/posts/ title=Posts><span>Posts</span></a></li><li><a href=https://ykhatri.dev/contact/ title=Contact><span>Contact</span></a></li><li><a href=https://ykhatri.dev/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://ykhatri.dev/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide</h1><div class=post-description>Connecting AWS App Runner with Amazon API Gateway inside a private network can be tricky ‚Äî especially when you want a secure, production-ready setup without exposing your backend to the public internet. In this guide, I‚Äôll walk through how to integrate API Gateway with your App Runner service over a private network using VPC links, handle routing, manage connectivity, and ensure security best practices. A practical guide for those who‚Äôve already mastered the basics and want to take their architecture to the next level.</div><div class=post-meta><span title='2025-11-05 00:00:00 +0000 UTC'>November 5, 2025</span>&nbsp;¬∑&nbsp;12 min&nbsp;¬∑&nbsp;Yougeshwar Khatri</div></header><figure class=entry-cover><img loading=eager src=https://ykhatri.dev/images/p3/cover.webp alt="Cover image for App Runner Service and API Gateway blog"></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#understanding-the-architecture>Understanding the Architecture</a></li><li><a href=#the-challenge>The Challenge</a></li><li><a href=#the-solution--connecting-api-gateway-and-app-runner-privately>The Solution ‚Äî Connecting API Gateway and App Runner Privately</a><ul><li><a href=#1-create-the-vpc-security-group-and-app-runner-vpc-endpoint>1. Create the VPC, Security Group, and App Runner VPC Endpoint</a></li><li><a href=#2-create-the-network-load-balancer>2. Create the Network Load Balancer</a></li><li><a href=#3-configure-app-runner-service-in-a-vpc>3. Configure App Runner Service in a VPC</a></li><li><a href=#4-configure-api-gateway-private-integration>4. Configure API Gateway Private Integration</a></li></ul></li><li><a href=#common-pitfalls--troubleshooting>Common Pitfalls & Troubleshooting</a></li><li><a href=#conclusion--next-steps>Conclusion & Next Steps</a><ul><li><a href=#key-takeaways>Key Takeaways</a></li><li><a href=#next-steps>Next Steps</a></li></ul></li><li><a href=#references>References</a></li></ul></nav></div></details></div><div class=post-content><h2 id=introduction>Introduction<a hidden class=anchor aria-hidden=true href=#introduction>#</a></h2><p>AWS App Runner makes it incredibly easy to deploy and scale web applications directly from your code repository or container image ‚Äî no infrastructure management required. It‚Äôs a great fit for developers who want simplicity without giving up the power of AWS.</p><p>But things start to get tricky when you want to <strong>securely connect App Runner to other AWS services inside a private VPC</strong> ‚Äî especially when you need to expose your backend through <strong>Amazon API Gateway</strong>.</p><p>By default, App Runner services are public-facing, and API Gateway communicates over the internet. While that works fine for basic setups, production environments often demand <strong>private connectivity</strong>, where all traffic stays within AWS‚Äôs internal network for security, compliance, or performance reasons.</p><p>In this guide, we‚Äôll go beyond the usual public setup and walk through how to:</p><ul><li>Connect <strong>Amazon API Gateway</strong> to your <strong>App Runner service</strong> through a private network path.</li><li>Use <strong>VPC Link</strong>, <strong>Network Load Balancer (NLB)</strong>, and <strong>App Runner VPC Endpoint</strong> to securely route traffic.</li><li>Avoid common networking pitfalls around subnets, DNS, and permissions.</li><li>Build a <strong>scalable</strong>, <strong>secure architecture</strong> suitable for production environments.</li></ul><p>By the end of this post, you‚Äôll have a working, private integration between API Gateway and App Runner ‚Äî a clean, secure pattern that combines the simplicity of App Runner with the control and power of AWS networking.</p><h2 id=understanding-the-architecture>Understanding the Architecture<a hidden class=anchor aria-hidden=true href=#understanding-the-architecture>#</a></h2><p>Before jumping into the implementation, it‚Äôs important to understand how each AWS service fits together in this design.</p><p><img alt=alt loading=lazy src=/images/p3/diagram.webp>
<em>Figure 1: Private integration between Amazon API Gateway and AWS App Runner using VPC Link, NLB, and App Runner VPC Endpoint.</em></p><p>The request flow works as follows:</p><ol><li><p><strong>Client ‚Üí API Gateway</strong>
The client sends an HTTP request to the API Gateway endpoint. This can be a public endpoint (secured with authentication) or a private API within your organization.</p></li><li><p><strong>API Gateway ‚Üí VPC Link</strong>
API Gateway uses a <strong>VPC Link</strong> to establish a private connection to resources inside your VPC. This avoids exposing your backend to the internet.</p></li><li><p><strong>VPC Link ‚Üí Network Load Balancer (NLB)</strong>
The VPC Link routes requests to a <strong>Network Load Balancer</strong>, which acts as the bridge between API Gateway and internal services. The NLB is required because VPC Link integrations must target a load balancer rather than an EC2 instance or endpoint directly.</p></li><li><p><strong>NLB ‚Üí App Runner VPC Endpoint</strong>
The NLB forwards traffic to the <strong>App Runner VPC Endpoint</strong> ‚Äî a private endpoint that connects your VPC to your App Runner service securely.</p></li><li><p><strong>App Runner VPC Endpoint ‚Üí App Runner Service</strong>
Finally, the traffic reaches your App Runner service running inside AWS‚Äôs managed environment. Since all components are privately connected, there‚Äôs no public internet exposure at any stage.</p></li></ol><p>This design ensures that your API Gateway communicates privately with App Runner, maintaining full control over inbound and outbound traffic. It‚Äôs a clean and secure pattern ideal for production workloads, regulated environments, or internal APIs.</p><h2 id=the-challenge>The Challenge<a hidden class=anchor aria-hidden=true href=#the-challenge>#</a></h2><p>When working with AWS App Runner, one of its biggest strengths ‚Äî <em>simplicity</em> ‚Äî can also become a limitation once you step into more advanced architectures.</p><p>By default, every App Runner service exposes a public endpoint, and any client or service can reach it over the internet (unless restricted via IAM or custom authentication). That‚Äôs fine for simple apps or prototypes, but in most production setups, you need your backend to:</p><ul><li>Communicate only within a private AWS network</li><li>Be accessible only through controlled entry points (like API Gateway)</li><li>Avoid public exposure for compliance or security reasons</li></ul><p>This is where the challenge begins.</p><p>API Gateway cannot directly integrate with App Runner over private connectivity. Unlike services such as ECS or Lambda, there‚Äôs no built-in ‚Äúprivate integration‚Äù option. Even though App Runner now supports VPC Endpoints, these endpoints can‚Äôt be called directly by API Gateway ‚Äî they must be reached through a VPC Link, which in turn requires a Network Load Balancer (NLB) as a target.</p><p>So the main puzzle looks like this:</p><blockquote><p>How can we connect API Gateway to a private App Runner service, without exposing anything publicly, while keeping the setup clean and maintainable?</p></blockquote><p>The answer lies in chaining the components together:</p><blockquote><p><strong>API Gateway ‚Üí VPC Link ‚Üí Network Load Balancer (NLB) ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service</strong></p></blockquote><p>Each layer serves a specific purpose in keeping the communication <strong>private, scalable, and secure.</strong></p><p>In the next section, we‚Äôll walk through how to implement this step by step using <strong>AWS CDK Python</strong>, highlighting key configurations along the way ‚Äî and link to a complete example repository for you to explore.</p><h2 id=the-solution--connecting-api-gateway-and-app-runner-privately>The Solution ‚Äî Connecting API Gateway and App Runner Privately<a hidden class=anchor aria-hidden=true href=#the-solution--connecting-api-gateway-and-app-runner-privately>#</a></h2><p>Now that we understand the architecture and the networking challenge, let‚Äôs look at how to bring everything together.
We‚Äôll use AWS CDK Python to provision all components, following the secure flow:</p><blockquote><p><strong>API Gateway ‚Üí VPC Link ‚Üí Network Load Balancer (NLB) ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service</strong>
Each layer plays a distinct role in ensuring private communication inside your AWS environment.</p></blockquote><h3 id=1-create-the-vpc-security-group-and-app-runner-vpc-endpoint>1. Create the VPC, Security Group, and App Runner VPC Endpoint<a hidden class=anchor aria-hidden=true href=#1-create-the-vpc-security-group-and-app-runner-vpc-endpoint>#</a></h3><p>Start by creating a <strong>VPC</strong> with private subnets and a <strong>security group</strong> that allows traffic between the Network Load Balancer (NLB) and the App Runner VPC Endpoint.
Next, set up the <strong>App Runner VPC Endpoint</strong> to enable private connectivity between your VPC and the App Runner service ‚Äî this ensures all communication stays internal, without exposing traffic to the public internet.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>vpc <span style=color:#f92672>=</span> ec2<span style=color:#f92672>.</span>Vpc(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;VPCId&#34;</span>,
</span></span><span style=display:flex><span>    vpc_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-vpc&#34;</span>,
</span></span><span style=display:flex><span>    subnet_configuration<span style=color:#f92672>=</span>[
</span></span><span style=display:flex><span>        ec2<span style=color:#f92672>.</span>SubnetConfiguration(
</span></span><span style=display:flex><span>            name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-private-subnet&#34;</span>,
</span></span><span style=display:flex><span>            subnet_type<span style=color:#f92672>=</span>ec2<span style=color:#f92672>.</span>SubnetType<span style=color:#f92672>.</span>PRIVATE_WITH_EGRESS,
</span></span><span style=display:flex><span>            cidr_mask<span style=color:#f92672>=</span><span style=color:#ae81ff>24</span>,
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>    nat_gateways<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span> <span style=color:#75715e># We don&#39;t need the NAT gateway</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>security_group <span style=color:#f92672>=</span> ec2<span style=color:#f92672>.</span>SecurityGroup(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;SecurityGroupId&#34;</span>,
</span></span><span style=display:flex><span>    security_group_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;security-group&#34;</span>,
</span></span><span style=display:flex><span>    vpc<span style=color:#f92672>=</span>vpc,
</span></span><span style=display:flex><span>    allow_all_outbound<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>security_group<span style=color:#f92672>.</span>add_ingress_rule(
</span></span><span style=display:flex><span>    peer<span style=color:#f92672>=</span>security_group,
</span></span><span style=display:flex><span>    connection<span style=color:#f92672>=</span>ec2<span style=color:#f92672>.</span>Port<span style=color:#f92672>.</span>all_traffic(),
</span></span><span style=display:flex><span>    description<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Allow all traffic within the security group&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vpc_apprunner_requests_endpoint <span style=color:#f92672>=</span> ec2<span style=color:#f92672>.</span>InterfaceVpcEndpoint(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;AppRunnerRequestsEndpointId&#34;</span>,
</span></span><span style=display:flex><span>    vpc<span style=color:#f92672>=</span>vpc,
</span></span><span style=display:flex><span>    service<span style=color:#f92672>=</span>ec2<span style=color:#f92672>.</span>InterfaceVpcEndpointAwsService<span style=color:#f92672>.</span>APP_RUNNER_REQUESTS,
</span></span><span style=display:flex><span>    subnets<span style=color:#f92672>=</span>ec2<span style=color:#f92672>.</span>SubnetSelection(subnet_type<span style=color:#f92672>=</span>ec2<span style=color:#f92672>.</span>SubnetType<span style=color:#f92672>.</span>PRIVATE_WITH_EGRESS),
</span></span><span style=display:flex><span>    security_groups<span style=color:#f92672>=</span>[security_group],
</span></span><span style=display:flex><span>    private_dns_enabled<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h3 id=2-create-the-network-load-balancer>2. Create the Network Load Balancer<a hidden class=anchor aria-hidden=true href=#2-create-the-network-load-balancer>#</a></h3><p>With the App Runner VPC Endpoint in place, the next step is to create a <strong>Network Load Balancer (NLB)</strong> inside your VPC which will be used connect to API Gateway via a <strong>VPC Link</strong>.</p><p>Since App Runner VPC Endpoints use dynamically assigned <strong>ENIs</strong>, the NLB target group must resolve the <strong>private IP addresses</strong> of these interfaces. This ensures that traffic from API Gateway reaches the App Runner service securely and privately.</p><p>Key points to keep in mind:</p><ul><li>The NLB target group will point to the <strong>App Runner VPC Endpoint</strong> network interfaces IP addresses.</li><li>Use <strong>TCP protocol</strong> for the target group, since App Runner listens for HTTP traffic internally.</li><li>Ensure security groups and subnet configurations allow traffic from the NLB to the App Runner service.</li></ul><p>Here‚Äôs a concise AWS CDK snippet showing the setup:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>eni_ipaddress_resolver <span style=color:#f92672>=</span> EniIpAddressResolver(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;EniIpAddressResolverId&#34;</span>,
</span></span><span style=display:flex><span>    network_interface_ids<span style=color:#f92672>=</span>vpc_apprunner_requests_endpoint_eni_ids
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>app_runner_vpc_endpoint_ips <span style=color:#f92672>=</span> eni_ipaddress_resolver<span style=color:#f92672>.</span>get_ip_addresses()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nlb_apprunner <span style=color:#f92672>=</span> elbv2<span style=color:#f92672>.</span>NetworkLoadBalancer(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;NLBAppRunnerId&#34;</span>,
</span></span><span style=display:flex><span>    load_balancer_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;nlb-app-runner&#34;</span>,
</span></span><span style=display:flex><span>    vpc<span style=color:#f92672>=</span>vpc,
</span></span><span style=display:flex><span>    vpc_subnets<span style=color:#f92672>=</span>ec2<span style=color:#f92672>.</span>SubnetSelection(
</span></span><span style=display:flex><span>        subnet_type<span style=color:#f92672>=</span>ec2<span style=color:#f92672>.</span>SubnetType<span style=color:#f92672>.</span>PRIVATE_WITH_EGRESS
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>    security_groups<span style=color:#f92672>=</span>[security_group],
</span></span><span style=display:flex><span>    internet_facing<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>    cross_zone_enabled<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    enforce_security_group_inbound_rules_on_private_link_traffic<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>,
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nlb_network_group <span style=color:#f92672>=</span> elbv2<span style=color:#f92672>.</span>NetworkTargetGroup(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;NLBAppRunnerTargetGroupId&#34;</span>,
</span></span><span style=display:flex><span>    target_group_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-nlb-app-runner-tg&#34;</span>,
</span></span><span style=display:flex><span>    vpc<span style=color:#f92672>=</span>vpc,
</span></span><span style=display:flex><span>    port<span style=color:#f92672>=</span><span style=color:#ae81ff>443</span>,
</span></span><span style=display:flex><span>    protocol<span style=color:#f92672>=</span>elbv2<span style=color:#f92672>.</span>Protocol<span style=color:#f92672>.</span>TCP,
</span></span><span style=display:flex><span>    target_type<span style=color:#f92672>=</span>elbv2<span style=color:#f92672>.</span>TargetType<span style=color:#f92672>.</span>IP,
</span></span><span style=display:flex><span>    targets<span style=color:#f92672>=</span>[elbv2targets<span style=color:#f92672>.</span>IpTarget(
</span></span><span style=display:flex><span>        ip) <span style=color:#66d9ef>for</span> ip <span style=color:#f92672>in</span> app_runner_vpc_endpoint_ips]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>nlb_listener <span style=color:#f92672>=</span> nlb_apprunner<span style=color:#f92672>.</span>add_listener(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;NLBAppRunnerListenerId&#34;</span>,
</span></span><span style=display:flex><span>    default_target_groups<span style=color:#f92672>=</span>[nlb_network_group],
</span></span><span style=display:flex><span>    port<span style=color:#f92672>=</span><span style=color:#ae81ff>443</span>,
</span></span><span style=display:flex><span>    protocol<span style=color:#f92672>=</span>elbv2<span style=color:#f92672>.</span>Protocol<span style=color:#f92672>.</span>TCP
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><blockquote><p>üí° <em>Note:</em> The <code>app_runner_vpc_endpoint_ips</code> should be dynamically resolved from the <strong>ENIs</strong> of your App Runner VPC Endpoint. The AWS CDK code for class <code>EniIpAddressResolver</code> in the example <a href=https://github.com/ypkkhatri/aws-examples/tree/main/apprunner-api-gateway-in-vpc>GitHub repo</a> handles this automatically.</p></blockquote><p>This setup allows <strong>API Gateway</strong> to route requests through the <strong>VPC Link ‚Üí NLB ‚Üí App Runner VPC Endpoint ‚Üí App Runner service</strong>, keeping all traffic within the private network.</p><h3 id=3-configure-app-runner-service-in-a-vpc>3. Configure App Runner Service in a VPC<a hidden class=anchor aria-hidden=true href=#3-configure-app-runner-service-in-a-vpc>#</a></h3><p>Once your VPC and NLB are ready, it‚Äôs time to configure the App Runner service to run inside your private network.</p><p>Key steps:</p><ol><li><strong>Attach the VPC Connector</strong><ul><li>Ensure your App Runner service uses a VPC Connector pointing to the private subnets of your VPC.</li><li>This allows the service to receive traffic through the NLB and communicate privately with other resources in the VPC.</li></ul></li><li><strong>Associate Security Groups</strong><ul><li>Use a security group that allows inbound traffic from the NLB and outbound traffic to any other required resources (databases, internal APIs, etc.).</li></ul></li><li><strong>Private DNS and Networking</strong><ul><li>App Runner services inside a VPC use private DNS names and ENIs, which are automatically resolved when registering with the NLB target group.</li></ul></li><li><strong>Create the VPC Ingress Connection</strong><ul><li>The VPC Ingress Connection is required for API Gateway or NLB to send traffic to a private App Runner service.</li><li>It establishes the secure link between the App Runner service and your VPC.</li></ul></li></ol><p>Here‚Äôs a concise <strong>CDK snippet</strong> illustrating the setup:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>apprunner_vpc_connector <span style=color:#f92672>=</span> apprunner<span style=color:#f92672>.</span>CfnVpcConnector(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;AppRunnerVpcConnectorId&#34;</span>,
</span></span><span style=display:flex><span>    vpc_connector_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-arvpcconn&#34;</span>,
</span></span><span style=display:flex><span>    subnets<span style=color:#f92672>=</span>vpc_subnet_ids,
</span></span><span style=display:flex><span>    security_groups<span style=color:#f92672>=</span>security_group_ids,
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apprunner_backend_api_service <span style=color:#f92672>=</span> apprunner<span style=color:#f92672>.</span>CfnService(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;AppRunnerBackendAPIServiceId&#34;</span>,
</span></span><span style=display:flex><span>    source_configuration<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnService<span style=color:#f92672>.</span>SourceConfigurationProperty(
</span></span><span style=display:flex><span>        authentication_configuration<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnService<span style=color:#f92672>.</span>AuthenticationConfigurationProperty(
</span></span><span style=display:flex><span>            access_role_arn<span style=color:#f92672>=</span>app_runner_role<span style=color:#f92672>.</span>role_arn
</span></span><span style=display:flex><span>        ),
</span></span><span style=display:flex><span>        image_repository<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnService<span style=color:#f92672>.</span>ImageRepositoryProperty(
</span></span><span style=display:flex><span>            image_identifier<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-app-image:latest&#34;</span>,
</span></span><span style=display:flex><span>            image_repository_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ECR&#34;</span>
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>    network_configuration<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnService<span style=color:#f92672>.</span>NetworkConfigurationProperty(
</span></span><span style=display:flex><span>        ingress_configuration<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnService<span style=color:#f92672>.</span>IngressConfigurationProperty(
</span></span><span style=display:flex><span>            is_publicly_accessible<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>        ),
</span></span><span style=display:flex><span>        egress_configuration<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnService<span style=color:#f92672>.</span>EgressConfigurationProperty(
</span></span><span style=display:flex><span>            egress_type<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;VPC&#34;</span>,
</span></span><span style=display:flex><span>            vpc_connector_arn<span style=color:#f92672>=</span>apprunner_vpc_connector<span style=color:#f92672>.</span>attr_vpc_connector_arn
</span></span><span style=display:flex><span>        ),
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>    health_check_configuration<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnService<span style=color:#f92672>.</span>HealthCheckConfigurationProperty(
</span></span><span style=display:flex><span>        path<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/&#34;</span>,
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apprunner_vpc_ingress_connection <span style=color:#f92672>=</span> apprunner<span style=color:#f92672>.</span>CfnVpcIngressConnection(
</span></span><span style=display:flex><span>    self,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;AppRunnerVpcIngressConnectionId&#34;</span>,
</span></span><span style=display:flex><span>    vpc_ingress_connection_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-arvpcincon&#34;</span>,
</span></span><span style=display:flex><span>    service_arn<span style=color:#f92672>=</span>apprunner_backend_api_service<span style=color:#f92672>.</span>attr_service_arn,
</span></span><span style=display:flex><span>    ingress_vpc_configuration<span style=color:#f92672>=</span>apprunner<span style=color:#f92672>.</span>CfnVpcIngressConnection<span style=color:#f92672>.</span>IngressVpcConfigurationProperty(
</span></span><span style=display:flex><span>        vpc_id<span style=color:#f92672>=</span>vpc<span style=color:#f92672>.</span>vpc_id,
</span></span><span style=display:flex><span>        vpc_endpoint_id<span style=color:#f92672>=</span>vpc_apprunner_requests_endpoint<span style=color:#f92672>.</span>vpc_endpoint_id
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><blockquote><p>üí° <em>Tip</em>: Your App Runner service now has full private connectivity, enabling API Gateway to route requests securely via the NLB and VPC Link.</p></blockquote><h3 id=4-configure-api-gateway-private-integration>4. Configure API Gateway Private Integration<a hidden class=anchor aria-hidden=true href=#4-configure-api-gateway-private-integration>#</a></h3><p>With the App Runner service fully private and connected to the VPC via the <strong>VPC Connector</strong> and <strong>VPC Ingress Connection</strong>, the final piece is to configure <strong>API Gateway</strong> so that it can securely route requests to your backend.</p><ol><li><strong>Create a VPC Link</strong><ul><li>The VPC Link connects API Gateway to your Network Load Balancer (NLB) inside the private VPC.</li><li>API Gateway uses this link to send traffic over the private network rather than the public internet.</li></ul></li><li><strong>Configure API Gateway Routes</strong><ul><li>Define the routes or methods for your API.</li><li>Each route uses the existing VPC Link to forward requests to the NLB, which then reaches the App Runner service.</li></ul></li><li><strong>Security and Access</strong><ul><li>Optionally, add authorization (Cognito, IAM, or Lambda authorizers) to your API Gateway endpoints.</li><li>Ensure security group rules allow traffic from the NLB to the App Runner service.</li></ul></li></ol><p>Here‚Äôs a concise <strong>CDK snippet</strong> showing the integration:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>vpc_link <span style=color:#f92672>=</span> apigateway<span style=color:#f92672>.</span>VpcLink(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;ApiGatwayVpcLinkId&#34;</span>,
</span></span><span style=display:flex><span>    description<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;VPC Link for App Runner NLB&#34;</span>,
</span></span><span style=display:flex><span>    vpc_link_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;my-nlb-vpc-link&#34;</span>,
</span></span><span style=display:flex><span>    targets<span style=color:#f92672>=</span>[nlb_apprunner]
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apigateway_restapi <span style=color:#f92672>=</span> apigateway<span style=color:#f92672>.</span>RestApi(
</span></span><span style=display:flex><span>    self, <span style=color:#e6db74>&#34;ApiGatwayOpdRestApiId&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>apprunner_integration <span style=color:#f92672>=</span> apigateway<span style=color:#f92672>.</span>Integration(
</span></span><span style=display:flex><span>    type<span style=color:#f92672>=</span>apigateway<span style=color:#f92672>.</span>IntegrationType<span style=color:#f92672>.</span>HTTP_PROXY,
</span></span><span style=display:flex><span>    integration_http_method<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ANY&#34;</span>,
</span></span><span style=display:flex><span>    options<span style=color:#f92672>=</span>apigateway<span style=color:#f92672>.</span>IntegrationOptions(
</span></span><span style=display:flex><span>        connection_type<span style=color:#f92672>=</span>apigateway<span style=color:#f92672>.</span>ConnectionType<span style=color:#f92672>.</span>VPC_LINK,
</span></span><span style=display:flex><span>        vpc_link<span style=color:#f92672>=</span>vpc_link,
</span></span><span style=display:flex><span>        passthrough_behavior<span style=color:#f92672>=</span>apigateway<span style=color:#f92672>.</span>PassthroughBehavior<span style=color:#f92672>.</span>WHEN_NO_MATCH,
</span></span><span style=display:flex><span>        request_parameters<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;integration.request.path.proxy&#34;</span>: <span style=color:#e6db74>&#34;method.request.path.proxy&#34;</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    ),
</span></span><span style=display:flex><span>    uri<span style=color:#f92672>=</span><span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;https://</span><span style=color:#e6db74>{</span>apprunner_vpc_ingress_connection<span style=color:#f92672>.</span>attr_domain_name<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;/</span><span style=color:#e6db74>{proxy}</span><span style=color:#e6db74>&#34;</span>,
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>restapi_apprunner_app_resource <span style=color:#f92672>=</span> apigateway_restapi<span style=color:#f92672>.</span>root<span style=color:#f92672>.</span>add_proxy(
</span></span><span style=display:flex><span>    any_method<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>,
</span></span><span style=display:flex><span>    default_integration<span style=color:#f92672>=</span>apprunner_integration,
</span></span><span style=display:flex><span>    default_method_options<span style=color:#f92672>=</span>apigateway<span style=color:#f92672>.</span>MethodOptions(
</span></span><span style=display:flex><span>        api_key_required<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, <span style=color:#75715e># As its enabled you need to setup the key separately</span>
</span></span><span style=display:flex><span>        request_parameters<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#34;method.request.path.proxy&#34;</span>: <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h4 id=-important>‚ö†Ô∏è Important<a hidden class=anchor aria-hidden=true href=#-important>#</a></h4><p>These <code>request_parameters</code> are crucial for proxy integrations to work correctly:</p><ul><li><code>"integration.request.path.proxy": "method.request.path.proxy"</code> ensures the path is correctly forwarded from API Gateway to the NLB.</li><li><code>"method.request.path.proxy"</code>: True enables the API Gateway route to accept any path parameter dynamically.</li></ul><p><strong>Missing these will cause the proxy route to fail or return 403/404 errors.</strong></p><p>This ensures that your App Runner backend is fully private, with requests securely routed through API Gateway without exposing anything publicly. All traffic now flows privately through: <strong>Client ‚Üí API Gateway ‚Üí NLB ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service</strong></p><h2 id=common-pitfalls--troubleshooting>Common Pitfalls & Troubleshooting<a hidden class=anchor aria-hidden=true href=#common-pitfalls--troubleshooting>#</a></h2><p>Even with a clear architecture, integrating API Gateway with App Runner in a private VPC can be tricky. Here are the most common issues and tips to avoid them:</p><ol><li><strong>ENI IP Address Resolution</strong><ul><li>App Runner VPC Endpoints use dynamically assigned network interfaces (ENIs).</li><li>The Network Load Balancer must register these IPs as targets.</li><li>‚úÖ Tip: Use the CDK or your IaC tool to automatically fetch and register the ENI IPs; manually using static IPs can break if App Runner scales or changes.</li></ul></li><li><strong>Security Groups and Subnet Configuration</strong><ul><li>Ensure <strong>security groups</strong> allow:<ul><li>NLB ‚Üí App Runner VPC Endpoint traffic (inbound)</li><li>App Runner ‚Üí other required services (outbound)</li></ul></li><li>Private subnets must have route tables allowing internal communication between NLB and App Runner.</li><li>üîπ Common mistake: forgetting inbound rules for the NLB ‚Üí App Runner path.</li></ul></li><li>API Gateway Proxy Integration Parameters<ul><li><p>As highlighted earlier, these <code>request_parameters</code> are critical:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#e6db74>&#34;integration.request.path.proxy&#34;</span>: <span style=color:#e6db74>&#34;method.request.path.proxy&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;method.request.path.proxy&#34;</span>: <span style=color:#66d9ef>True</span>
</span></span></code></pre></div></li><li><p>Missing or misconfigured parameters can cause <strong>403, 404, or 502 errors</strong>. Always verify them in your code.</p></li></ul></li><li><strong>DNS and Private Connectivity</strong><ul><li>App Runner services in a VPC use <strong>private DNS</strong>.</li><li>NLB target groups must resolve these private DNS names to ENI IP addresses.</li><li>‚ùó If DNS fails, traffic will not reach App Runner ‚Äî double-check private DNS and subnet connectivity.</li></ul></li><li><strong>Testing and Logging</strong><ul><li>Use <strong>Postman, curl, or API Gateway test console</strong> to validate requests.</li><li>Enable <strong>CloudWatch logs</strong> on API Gateway and App Runner for troubleshooting.</li><li>Enable <strong>AWS X-Ray tracing</strong> for both API Gateway and App Runner Service to get end-to-end visibility of requests, latency, and potential bottlenecks.</li><li>Confirm that traffic flows: <strong>Client ‚Üí API Gateway ‚Üí NLB ‚Üí App Runner VPC Endpoint ‚Üí App Runner Service</strong></li></ul></li></ol><blockquote><p>üí° Pro Tip: Most issues in private integration setups come from <strong>networking or security group misconfigurations</strong>, so verify your VPC, subnets, and SG rules before troubleshooting code.</p></blockquote><h2 id=conclusion--next-steps>Conclusion & Next Steps<a hidden class=anchor aria-hidden=true href=#conclusion--next-steps>#</a></h2><p>In this guide, we explored how to set up <strong>Amazon API Gateway</strong> as a front door for an <strong>AWS App Runner service</strong> in a private VPC. By combining <strong>VPC Links, Network Load Balancer,</strong> and <strong>App Runner VPC Endpoints,</strong> we achieved a secure, fully private integration that keeps all traffic inside your AWS network.</p><h3 id=key-takeaways>Key Takeaways<a hidden class=anchor aria-hidden=true href=#key-takeaways>#</a></h3><ul><li>App Runner services can now operate <strong>privately</strong>, avoiding public exposure.</li><li>API Gateway VPC Links enable <strong>private connectivity</strong> to internal resources like NLB and App Runner endpoints.</li><li>Proper configuration of <strong>security groups, subnets, and proxy integration parameters</strong> is critical for a working setup.</li><li>AWS CDK (or other IaC tools) simplifies provisioning and dynamically resolves App Runner ENI IP addresses.</li><li><strong>AWS X-Ray</strong> (if enabled) and CloudWatch logs help trace requests end-to-end and troubleshoot networking issues.</li></ul><h3 id=next-steps>Next Steps<a hidden class=anchor aria-hidden=true href=#next-steps>#</a></h3><ul><li>Explore <strong>authorization options</strong> on API Gateway (Cognito, IAM, or Lambda authorizers) to control access to your private backend.<ul><li>üîπ Tip: You can refer to my previous blog on Lambda@Edge with Amazon Cognito for detailed guidance on integrating authentication and JWT validation:<ul><li>[üîó Step-by-Step Guide: Setting Up Lambda@Edge for Authentication & Authorization with Amazon Cognito]</li></ul></li></ul></li><li>Automate deployment using <strong>CI/CD pipelines</strong> for reproducible setups.</li><li>Experiment with <strong>scaling App Runner services</strong> while maintaining private integration.</li><li>Check out the <strong>example repository</strong> for the full AWS CDK Python implementation: üîó <a href=https://github.com/ypkkhatri/aws-examples/tree/main/apprunner-api-gateway-in-vpc>GitHub Example Repo Link</a></li><li><strong>Comment on below if you‚Äôd like a Terraform version of this setup!</strong></li></ul><p>This architecture provides a <strong>secure, scalable, and maintainable pattern</strong> for exposing App Runner services through API Gateway without public internet exposure ‚Äî ideal for internal APIs, regulated environments, or production workloads.</p><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><p>The following resources provided valuable insights and context for this guide, covering <strong>AWS App Runner, API Gateway private integrations, VPC connectivity</strong>:</p><ul><li><a href="https://www.youtube.com/watch?v=H5OKe8jXnX0">https://www.youtube.com/watch?v=H5OKe8jXnX0</a></li><li><a href=https://repost.aws/knowledge-center/api-gateway-500-error-vpc>https://repost.aws/knowledge-center/api-gateway-500-error-vpc</a></li><li><a href=https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-security-groups.html>https://docs.aws.amazon.com/elasticloadbalancing/latest/network/load-balancer-security-groups.html</a></li><li><a href=https://aws.amazon.com/blogs/compute/understanding-vpc-links-in-amazon-api-gateway-private-integrations/>https://aws.amazon.com/blogs/compute/understanding-vpc-links-in-amazon-api-gateway-private-integrations/</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://ykhatri.dev/tags/aws/>AWS</a></li><li><a href=https://ykhatri.dev/tags/api-gateway/>API Gateway</a></li><li><a href=https://ykhatri.dev/tags/app-runner/>App Runner</a></li><li><a href=https://ykhatri.dev/tags/vpc/>VPC</a></li><li><a href=https://ykhatri.dev/tags/serverless/>Serverless</a></li><li><a href=https://ykhatri.dev/tags/cloud/>Cloud</a></li><li><a href=https://ykhatri.dev/tags/backend/>Backend</a></li><li><a href=https://ykhatri.dev/tags/architecture/>Architecture</a></li><li><a href=https://ykhatri.dev/tags/security/>Security</a></li><li><a href=https://ykhatri.dev/tags/networking/>Networking</a></li></ul><nav class=paginav><a class=next href=https://ykhatri.dev/posts/step-by-step-guide-setting-up-lambda-at-edge-for-authentication-and-authorization-with-amazon-cognito/><span class=title>Next ¬ª</span><br><span>Step-by-Step Guide: Setting Up Lambda@Edge for Authentication & Authorization with Amazon Cognito</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide on x" href="https://x.com/intent/tweet/?text=How%20to%20Set%20Up%20API%20Gateway%20as%20a%20Front%20Door%20for%20Your%20AWS%20App%20Runner%20Service%20in%20a%20VPC%3a%20A%20Practical%20Guide&amp;url=https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f&amp;hashtags=AWS%2cAPIGateway%2cAppRunner%2cVPC%2cServerless%2cCloud%2cBackend%2cArchitecture%2cSecurity%2cNetworking"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f&amp;title=How%20to%20Set%20Up%20API%20Gateway%20as%20a%20Front%20Door%20for%20Your%20AWS%20App%20Runner%20Service%20in%20a%20VPC%3a%20A%20Practical%20Guide&amp;summary=How%20to%20Set%20Up%20API%20Gateway%20as%20a%20Front%20Door%20for%20Your%20AWS%20App%20Runner%20Service%20in%20a%20VPC%3a%20A%20Practical%20Guide&amp;source=https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f&title=How%20to%20Set%20Up%20API%20Gateway%20as%20a%20Front%20Door%20for%20Your%20AWS%20App%20Runner%20Service%20in%20a%20VPC%3a%20A%20Practical%20Guide"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide on whatsapp" href="https://api.whatsapp.com/send?text=How%20to%20Set%20Up%20API%20Gateway%20as%20a%20Front%20Door%20for%20Your%20AWS%20App%20Runner%20Service%20in%20a%20VPC%3a%20A%20Practical%20Guide%20-%20https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide on telegram" href="https://telegram.me/share/url?text=How%20to%20Set%20Up%20API%20Gateway%20as%20a%20Front%20Door%20for%20Your%20AWS%20App%20Runner%20Service%20in%20a%20VPC%3a%20A%20Practical%20Guide&amp;url=https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share How to Set Up API Gateway as a Front Door for Your AWS App Runner Service in a VPC: A Practical Guide on ycombinator" href="https://news.ycombinator.com/submitlink?t=How%20to%20Set%20Up%20API%20Gateway%20as%20a%20Front%20Door%20for%20Your%20AWS%20App%20Runner%20Service%20in%20a%20VPC%3a%20A%20Practical%20Guide&u=https%3a%2f%2fykhatri.dev%2fposts%2fhow-to-set-up-api-gateway-as-a-front-door-for-your-aws-app-runner-service-in-a-vpc-a-practical-guide%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><br><div id=giscus-container></div><script>const currentTheme=localStorage.getItem("pref-theme")||"light",giscusScript=document.createElement("script");giscusScript.src="https://giscus.app/client.js",giscusScript.setAttribute("data-repo","ypkkhatri/ykhatri-dev-posts-comments"),giscusScript.setAttribute("data-repo-id","R_kgDOPhKOew"),giscusScript.setAttribute("data-category","General"),giscusScript.setAttribute("data-category-id","DIC_kwDOPhKOe84CuYq6"),giscusScript.setAttribute("data-mapping","pathname"),giscusScript.setAttribute("data-strict","0"),giscusScript.setAttribute("data-reactions-enabled","0"),giscusScript.setAttribute("data-emit-metadata","0"),giscusScript.setAttribute("data-input-position","top"),giscusScript.setAttribute("data-theme",currentTheme),giscusScript.setAttribute("data-lang","en"),giscusScript.setAttribute("data-loading","lazy"),giscusScript.crossOrigin="anonymous",giscusScript.async=!0,document.getElementById("giscus-container").appendChild(giscusScript);function updateGiscusTheme(){const t=localStorage.getItem("pref-theme"),e=document.querySelector("iframe.giscus-frame");e&&e.contentWindow.postMessage({giscus:{setConfig:{theme:t}}},"https://giscus.app")}window.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("theme-toggle");e&&e.addEventListener("click",()=>updateGiscusTheme())})</script></article></main><footer class=footer><span>Yougeshwar Khatri &copy; 2025</span> ¬∑
<span><a href=/privacy-policy/>Privacy Policy</a></span> ¬∑
<span><a href=/terms-and-conditions/>Terms and Conditions</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script src=https://challenges.cloudflare.com/turnstile/v0/api.js async defer></script></body></html>